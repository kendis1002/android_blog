<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>Exception trong coroutine</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/android_blog/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/android_blog/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/android_blog/assets/built/syntax.css" />
    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="M·ªôt n∆°i m√† t√¥i v√† b·∫°n c√≥ th·ªÉ h·ªçc Android c√πng nhau" />
    <link rel="shortcut icon" href="/android_blog/assets/images/favicon.png" type="image/png" />
    <link rel="canonical" href="/android_blog/coroutines-cancellation-exceptions" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="Kendis .dev" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Exception trong coroutine" />
    <meta property="og:description" content="T·∫•t c·∫£ nh·ªØng ƒëi·ªÅu b·∫°n c·∫ßn bi·∫øt v·ªÅ exception trong coroutine Ch√∫ng ta, nh·ªØng nh√† ph√°t tri·ªÉn, th∆∞·ªùng d√†nh r·∫•t nhi·ªÅu th·ªùi gian ƒë·ªÉ trau chu·ªët cho con ƒë∆∞·ªùng thu·∫≠n khi ph√°t tri·ªÉn ·ª©ng d·ª•ng. Tuy nhi√™n, c≈©ng quan tr·ªçng kh√¥ng k√©m l√† cung c·∫•p tr·∫£i nghi·ªám ng∆∞·ªùi d√πng t·ªët" />
    <meta property="og:url" content="/android_blog/coroutines-cancellation-exceptions" />
    <meta property="og:image" content="/android_blog/assets/images/coroutine-cancellation-exceptions.png" />
    <meta property="article:publisher" content="https://www.facebook.com/kendis1002" />
    <meta property="article:author" content="https://www.facebook.com/kendis1002" />
    <meta property="article:published_time" content="2023-12-14T10:18:00+00:00" />
    <meta property="article:modified_time" content="2023-12-14T10:18:00+00:00" />
    <meta property="article:tag" content="Coroutine" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Exception trong coroutine" />
    <meta name="twitter:description" content="T·∫•t c·∫£ nh·ªØng ƒëi·ªÅu b·∫°n c·∫ßn bi·∫øt v·ªÅ exception trong coroutine Ch√∫ng ta, nh·ªØng nh√† ph√°t tri·ªÉn, th∆∞·ªùng d√†nh r·∫•t nhi·ªÅu th·ªùi gian ƒë·ªÉ trau chu·ªët cho con ƒë∆∞·ªùng thu·∫≠n khi ph√°t tri·ªÉn ·ª©ng d·ª•ng. Tuy nhi√™n, c≈©ng quan tr·ªçng kh√¥ng k√©m l√† cung c·∫•p tr·∫£i nghi·ªám ng∆∞·ªùi d√πng t·ªët" />
    <meta name="twitter:url" content="/android_blog/" />
    <meta name="twitter:image" content="/android_blog/assets/images/coroutine-cancellation-exceptions.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Kendis .dev" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Coroutine" />
    <meta name="twitter:site" content="@false" />
    <meta name="twitter:creator" content="@false" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "Kendis .dev",
        "logo": "/android_blog/false"
    },
    "url": "/android_blog/coroutines-cancellation-exceptions",
    "image": {
        "@type": "ImageObject",
        "url": "/android_blog/assets/images/coroutine-cancellation-exceptions.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "/android_blog/coroutines-cancellation-exceptions"
    },
    "description": "T·∫•t c·∫£ nh·ªØng ƒëi·ªÅu b·∫°n c·∫ßn bi·∫øt v·ªÅ exception trong coroutine Ch√∫ng ta, nh·ªØng nh√† ph√°t tri·ªÉn, th∆∞·ªùng d√†nh r·∫•t nhi·ªÅu th·ªùi gian ƒë·ªÉ trau chu·ªët cho con ƒë∆∞·ªùng thu·∫≠n khi ph√°t tri·ªÉn ·ª©ng d·ª•ng. Tuy nhi√™n, c≈©ng quan tr·ªçng kh√¥ng k√©m l√† cung c·∫•p tr·∫£i nghi·ªám ng∆∞·ªùi d√πng t·ªët"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Exception trong coroutine" href="/android_blog/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="/android_blog/">Kendis .dev</a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/android_blog/">Trang ch·ªß</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/android_blog/tag/architecture/">Architecture</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/android_blog/tag/coroutine/">Coroutine</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/android_blog/tag/hilt/">Hilt</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/android_blog/tag/compose/">Compose</a></li>
    <li class="nav-about" role="menuitem"><a href="/android_blog/about/">T√¥i</a></li>
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
                <a class="social-link social-link-fb" href="https://facebook.com/kendis1002" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
</a>
            
            
        </div>
        
            <a class="subscribe-button" href="#subscribe">Theo d√µi</a>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  tag-coroutine post ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="14 December 2023">14 December 2023</time>
                </section>
                
                    
                        
                        <span class="post-card-tags">
                            <a href='/android_blog/tag/coroutine/' style="color:white;">COROUTINE</a>
                        </span>
                        
                    
                
                <h1 class="post-full-title">Exception trong coroutine</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/android_blog/assets/images/coroutine-cancellation-exceptions.png)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <p>T·∫•t c·∫£ nh·ªØng ƒëi·ªÅu b·∫°n c·∫ßn bi·∫øt v·ªÅ exception trong coroutine</p>

<p>Ch√∫ng ta, nh·ªØng nh√† ph√°t tri·ªÉn, th∆∞·ªùng d√†nh r·∫•t nhi·ªÅu th·ªùi gian ƒë·ªÉ trau chu·ªët cho con ƒë∆∞·ªùng thu·∫≠n khi ph√°t tri·ªÉn ·ª©ng d·ª•ng. Tuy nhi√™n, c≈©ng quan tr·ªçng kh√¥ng k√©m l√† cung c·∫•p tr·∫£i nghi·ªám ng∆∞·ªùi d√πng t·ªët khi m·ªçi th·ª© kh√¥ng di·ªÖn ra nh∆∞ mong ƒë·ª£i. M·ªôt m·∫∑t, vi·ªác th·∫•y ·ª©ng d·ª•ng b·ªã crash l√† m·ªôt tr·∫£i nghi·ªám t·ªìi t·ªá ƒë·ªëi v·ªõi ng∆∞·ªùi d√πng; m·∫∑t kh√°c, hi·ªÉn th·ªã th√¥ng b√°o ph√π h·ª£p cho ng∆∞·ªùi d√πng khi m·ªôt h√†nh ƒë·ªông kh√¥ng th√†nh c√¥ng l√† ƒëi·ªÅu kh√¥ng th·ªÉ thi·∫øu.</p>

<p>Vi·ªác x·ª≠ l√Ω exception ƒë√∫ng c√°ch c√≥ ·∫£nh h∆∞·ªüng r·∫•t l·ªõn ƒë·∫øn c√°ch ng∆∞·ªùi d√πng c·∫£m nh·∫≠n ·ª©ng d·ª•ng c·ªßa b·∫°n. Trong b√†i vi·∫øt n√†y, ch√∫ng t√¥i s·∫Ω gi·∫£i th√≠ch c√°ch exception ƒë∆∞·ª£c lan truy·ªÅn trong coroutines v√† c√°ch b·∫°n lu√¥n c√≥ th·ªÉ ki·ªÉm so√°t, bao g·ªìm c√°c c√°ch kh√°c nhau ƒë·ªÉ x·ª≠ l√Ω ch√∫ng.</p>

<h2 id="m·ªôt-coroutine-b·∫•t-ng·ªù-b·ªã-fail-l√†m-g√¨-b√¢y-gi·ªù-">M·ªôt coroutine b·∫•t ng·ªù b·ªã fail! L√†m g√¨ b√¢y gi·ªù? üò±</h2>

<p>Khi m·ªôt coroutine g·∫∑p exception, n√≥ s·∫Ω truy·ªÅn exception ƒë√≥ l√™n cho coroutine cha c·ªßa n√≥! Sau ƒë√≥, coroutine cha s·∫Ω:</p>
<ol>
  <li>H·ªßy b·ªè t·∫•t c·∫£ c√°c coroutine con c√≤n l·∫°i c·ªßa n√≥.</li>
  <li>H·ªßy b·ªè ch√≠nh n√≥.</li>
  <li>Truy·ªÅn exception l√™n cho coroutine cha c·ªßa n√≥.
L·ªói s·∫Ω ti·∫øp t·ª•c lan truy·ªÅn cho ƒë·∫øn g·ªëc c·ªßa h·ªá th·ªëng ph√¢n c·∫•p, v√† t·∫•t c·∫£ c√°c coroutine ƒë∆∞·ª£c kh·ªüi t·∫°o b·ªüi <code class="language-plaintext highlighter-rouge">CoroutineScope</code> c≈©ng s·∫Ω b·ªã h·ªßy b·ªè.</li>
</ol>

<p><img src="assets/images/coroutine-cancellation-exceptions-1.gif" alt="M·ªôt exception trong m·ªôt coroutine s·∫Ω lan truy·ªÅn xuy√™n su·ªët h·ªá th·ªëng ph√¢n c·∫•p c·ªßa c√°c coroutine." title="M·ªôt exception trong m·ªôt coroutine s·∫Ω lan truy·ªÅn xuy√™n su·ªët h·ªá th·ªëng ph√¢n c·∫•p c·ªßa c√°c coroutine." /></p>

<p>M·∫∑c d√π vi·ªác truy·ªÅn t·∫£i exception c√≥ th·ªÉ h·ª£p l√Ω trong m·ªôt s·ªë tr∆∞·ªùng h·ª£p, nh∆∞ng c≈©ng c√≥ nh·ªØng tr∆∞·ªùng h·ª£p kh√°c m√† ch√∫ng ta kh√¥ng mong mu·ªën. H√£y t∆∞·ªüng t∆∞·ª£ng m·ªôt <code class="language-plaintext highlighter-rouge">CoroutineScope</code> li√™n quan ƒë·∫øn UI ch·ªãu tr√°ch nhi·ªám x·ª≠ l√Ω c√°c t∆∞∆°ng t√°c c·ªßa ng∆∞·ªùi d√πng. N·∫øu m·ªôt coroutine con n√©m exception, ph·∫°m vi UI s·∫Ω b·ªã h·ªßy b·ªè v√† to√†n b·ªô th√†nh ph·∫ßn UI s·∫Ω tr·ªü n√™n v√¥ ph·∫£n h·ªìi v√¨ Scope ƒë√£ b·ªã hu·ª∑ kh√¥ng th·ªÉ kh·ªüi ƒë·ªông th√™m coroutine n√†o n·ªØa.</p>

<p>L√†m th·∫ø n√†o n·∫øu b·∫°n kh√¥ng mu·ªën h√†nh vi ƒë√≥? Thay v√†o ƒë√≥, b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng m·ªôt tri·ªÉn khai kh√°c c·ªßa <code class="language-plaintext highlighter-rouge">Job</code>, c·ª• th·ªÉ l√† <code class="language-plaintext highlighter-rouge">SupervisorJob</code>, trong <code class="language-plaintext highlighter-rouge">CoroutineContext</code> c·ªßa <code class="language-plaintext highlighter-rouge">CoroutineScope</code> ƒë·ªÉ t·∫°o c√°c coroutine n√†y.</p>

<h2 id="supervisorjob-s·∫Ω-c·ª©u-c√°c-b·∫°n-trong-tr∆∞·ªùng-h·ª£p-n√†y">SupervisorJob s·∫Ω c·ª©u c√°c b·∫°n trong tr∆∞·ªùng h·ª£p n√†y</h2>

<p>V·ªõi <code class="language-plaintext highlighter-rouge">SupervisorJob</code>, l·ªói con s·∫Ω kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn c√°c con kh√°c. M·ªôt <code class="language-plaintext highlighter-rouge">SupervisorJob</code> s·∫Ω kh√¥ng t·ª± hu·ª∑ v√† c·∫£ c√°c con c√≤n l·∫°i c·ªßa <code class="language-plaintext highlighter-rouge">SupervisorJob</code> c≈©ng v·∫≠y. H∆°n n·ªØa, <code class="language-plaintext highlighter-rouge">SupervisorJob</code> s·∫Ω kh√¥ng truy·ªÅn Exception m√† ƒë·ªÉ cho coroutine con x·ª≠ l√Ω n√≥.</p>

<p>B·∫°n c√≥ th·ªÉ t·∫°o 1 <code class="language-plaintext highlighter-rouge">CoroutineScope</code> nh∆∞ sau <code class="language-plaintext highlighter-rouge">val uiScope = CoroutineScope(SupervisorJob())</code> ƒë·ªÉ kh√¥ng truy·ªÅn cancellation khi m√† coroutine b·ªã l·ªói nh∆∞ h√¨nh d∆∞·ªõi m√¥ t·∫£</p>

<p><img src="assets/images/coroutines-cancellation-exceptions-3_2.png" alt="SupervisorJob v√† to√†n b·ªô c√°c con c√≤n l·∫°i c·ªßa n√≥ s·∫Ω kh√¥ng hu·ª∑." title="SupervisorJob v√† to√†n b·ªô c√°c con c√≤n l·∫°i c·ªßa n√≥ s·∫Ω kh√¥ng hu·ª∑." /></p>

<p>N·∫øu exception kh√¥ng ƒë∆∞·ª£c x·ª≠ l√Ω v√† <code class="language-plaintext highlighter-rouge">CoroutineContext</code> kh√¥ng c√≥ <code class="language-plaintext highlighter-rouge">CoroutineExceptionHandler</code> (ch√∫ng ta s·∫Ω t√¨m hi·ªÉu sau), n√≥ s·∫Ω t·ªõi <code class="language-plaintext highlighter-rouge">ExceptionHandler</code> c·ªßa thread m·∫∑c ƒë·ªãnh. Trong JVM, exception s·∫Ω ƒë∆∞·ª£c ghi ra console. Trong Android, n√≥ s·∫Ω khi·∫øn ·ª©ng d·ª•ng c·ªßa b·∫°n b·ªã crash b·∫•t k·ªÉ n√≥ x·∫£y ra tr√™n Dispatcher n√†o.</p>

<blockquote>
  <p>üí• Exception ch∆∞a ƒë∆∞·ª£c x·ª≠ l√Ω s·∫Ω lu√¥n b·ªã n√©m ra b·∫•t k·ªÉ b·∫°n s·ª≠ d·ª•ng lo·∫°i Job n√†o.</p>
</blockquote>

<p>H√†nh vi t∆∞∆°ng t·ª± c≈©ng √°p d·ª•ng cho c√°c scope builder <code class="language-plaintext highlighter-rouge">coroutineScope</code> v√† <code class="language-plaintext highlighter-rouge">supervisorScope</code>. Ch√∫ng s·∫Ω t·∫°o sub-scope (v·ªõi m·ªôt <code class="language-plaintext highlighter-rouge">Job</code> ho·∫∑c <code class="language-plaintext highlighter-rouge">SupervisorJob</code> t∆∞∆°ng ·ª©ng nh∆∞ cha) ƒë·ªÉ b·∫°n c√≥ th·ªÉ nh√≥m c√°c coroutine m·ªôt c√°ch logic (v√≠ d·ª•: n·∫øu b·∫°n mu·ªën th·ª±c hi·ªán c√°c t√≠nh to√°n song song ho·∫∑c mu·ªën ch√∫ng c√≥ ho·∫∑c kh√¥ng b·ªã ·∫£nh h∆∞·ªüng l·∫´n nhau).</p>

<p>Ch√∫ √Ω: <code class="language-plaintext highlighter-rouge">SupervisorJob</code> ch·ªâ ho·∫°t ƒë·ªông nh∆∞ m√¥ t·∫£ khi n√≥ l√† m·ªôt ph·∫ßn c·ªßa scope: ƒë∆∞·ª£c t·∫°o b·∫±ng <code class="language-plaintext highlighter-rouge">supervisorScope</code> ho·∫∑c <code class="language-plaintext highlighter-rouge">CoroutineScope(SupervisorJob())</code>.</p>

<h2 id="job-hay-supervisorjob-">Job hay SupervisorJob? ü§î</h2>

<p>V·∫≠y th√¨ l√∫c n√†o s·ª≠ d·ª•ng <code class="language-plaintext highlighter-rouge">Job</code>, l√∫c n√†o s·ª≠ d·ª•ng <code class="language-plaintext highlighter-rouge">SupervisorJob</code>? B·∫°n n√™n d√πng <code class="language-plaintext highlighter-rouge">SupervisorJob</code> ho·∫∑c <code class="language-plaintext highlighter-rouge">supervisorScope</code> khi KH√îNG MU·ªêN m·ªôt l·ªói khi·∫øn coroutine cha m·∫π v√† c√°c coroutine con kh√°c b·ªã h·ªßy b·ªè.</p>

<p>V√≠ d·ª•:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Scope handling coroutines for a particular layer of my app</span>
<span class="kd">val</span> <span class="py">scope</span> <span class="p">=</span> <span class="nc">CoroutineScope</span><span class="p">(</span><span class="nc">SupervisorJob</span><span class="p">())</span>

<span class="n">scope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
    <span class="c1">// Child 1</span>
<span class="p">}</span>

<span class="n">scope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
    <span class="c1">// Child 2</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Trong tr∆∞·ªùng h·ª£p n√†y, if <code class="language-plaintext highlighter-rouge">child#1</code> fail, th√¨ c·∫£ scope l·∫´n <code class="language-plaintext highlighter-rouge">child#2</code> ƒë·ªÅu s·∫Ω b·ªã hu·ª∑.</p>

<p>V√≠ d·ª• kh√°c:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Scope handling coroutines for a particular layer of my app</span>
<span class="kd">val</span> <span class="py">scope</span> <span class="p">=</span> <span class="nc">CoroutineScope</span><span class="p">(</span><span class="nc">Job</span><span class="p">())</span>

<span class="n">scope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
    <span class="nf">supervisorScope</span> <span class="p">{</span>
        <span class="nf">launch</span> <span class="p">{</span>
            <span class="c1">// Child 1</span>
        <span class="p">}</span>
        <span class="nf">launch</span> <span class="p">{</span>
            <span class="c1">// Child 2</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Trong tr∆∞·ªùng h·ª£p n√†y, v√¨ <code class="language-plaintext highlighter-rouge">supervisorScope</code> t·∫°o m·ªôt sub-scope v·ªõi m·ªôt <code class="language-plaintext highlighter-rouge">SupervisorJob</code>, n·∫øu <code class="language-plaintext highlighter-rouge">child#1</code> l·ªói, <code class="language-plaintext highlighter-rouge">child#2</code> s·∫Ω KH√îNG B·ªä h·ªßy b·ªè. N·∫øu thay v√†o ƒë√≥ b·∫°n s·ª≠ d·ª•ng <code class="language-plaintext highlighter-rouge">coroutineScope</code> trong c√†i ƒë·∫∑t, l·ªói s·∫Ω ƒë∆∞·ª£c lan truy·ªÅn v√† cu·ªëi c√πng s·∫Ω h·ªßy b·ªè c·∫£ scope.</p>

<h2 id="quiz-nh√©-ai-l√†-cha-c·ªßa-t√¥i-">Quiz nh√©! Ai l√† cha c·ªßa t√¥i? üéØ</h2>

<p>Cho ƒëo·∫°n code ph√≠a d∆∞·ªõi, b·∫°n c√≥ th·ªÉ x√°c ƒë·ªãnh cho t√¥i bi·∫øt r·∫±ng lo·∫°i Job n√†o l√† cha c·ªßa child#1?</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">scope</span> <span class="p">=</span> <span class="nc">CoroutineScope</span><span class="p">(</span><span class="nc">Job</span><span class="p">())</span>

<span class="n">scope</span><span class="p">.</span><span class="nf">launch</span><span class="p">(</span><span class="nc">SupervisorJob</span><span class="p">())</span> <span class="p">{</span>
    <span class="c1">// new coroutine -&gt; can suspend</span>
    <span class="nf">launch</span> <span class="p">{</span>
        <span class="c1">// Child 1</span>
    <span class="p">}</span>
    <span class="nf">launch</span> <span class="p">{</span>
        <span class="c1">// Child 2</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Job cha c·ªßa child#1 l√† ki·ªÉu Job! Hi v·ªçng b·∫°n kh√¥ng c√≥ sai! D√π tho·∫°t nh√¨n b·∫°n c√≥ th·ªÉ nghƒ© n√≥ l√† m·ªôt SupervisorJob, nh∆∞ng kh√¥ng ph·∫£i v√¨ m·ªôt coroutine m·ªõi lu√¥n ƒë∆∞·ª£c g√°n m·ªôt Job() m·ªõi, v√† trong tr∆∞·ªùng h·ª£p n√†y, n√≥ ghi ƒë√® l√™n SupervisorJob. SupervisorJob l√† job cha c·ªßa coroutine ƒë∆∞·ª£c t·∫°o v·ªõi scope.launch; ƒë∆°n gi·∫£n l√†, SupervisorJob kh√¥ng l√†m g√¨ trong ƒëo·∫°n code ƒë√≥!</p>

<p><img src="assets/images/coroutines-cancellation-exceptions-3_3.png" alt="Cha c·ªßa `child#1` and `child#2` l√†`Job`, kh√¥ng ph·∫£i `SupervisorJob`." title="Cha c·ªßa `child#1` and `child#2` l√†`Job`, kh√¥ng ph·∫£i `SupervisorJob`." /></p>

<p>V√¨ th·∫ø n·∫øu <code class="language-plaintext highlighter-rouge">child#1</code> ho·∫∑c <code class="language-plaintext highlighter-rouge">child#2</code> fail, th√¨ l·ªói s·∫Ω t·ªõi ƒë∆∞·ª£c scope v√† t·∫•t c·∫£ vi·ªác ƒë∆∞·ª£c b·∫Øt ƒë·∫ßu b·ªüi n√≥ s·∫Ω b·ªã hu·ª∑.</p>

<p>Nh·ªõ r·∫±ng <code class="language-plaintext highlighter-rouge">SupervisorJob</code> ch·ªâ ho·∫°t ƒë·ªông nh∆∞ m√¥ t·∫£ khi n√≥ l√† m·ªôt ph·∫ßn c·ªßa scope, ƒë∆∞·ª£c t·∫°o b·∫±ng <code class="language-plaintext highlighter-rouge">supervisorScope</code> ho·∫∑c <code class="language-plaintext highlighter-rouge">CoroutineScope(SupervisorJob())</code>. Truy·ªÅn <code class="language-plaintext highlighter-rouge">SupervisorJob</code> nh∆∞ m·ªôt tham s·ªë c·ªßa m·ªôt builder coroutine s·∫Ω kh√¥ng c√≥ t√°c d·ª•ng mong mu·ªën ƒë·ªëi v·ªõi vi·ªác h·ªßy b·ªè nh∆∞ b·∫°n nghƒ©. ƒêi·ªÅu n√†y nh·∫•n m·∫°nh r·∫±ng <code class="language-plaintext highlighter-rouge">SupervisorJob</code> ch·ªâ ·∫£nh h∆∞·ªüng ƒë·∫øn c√°ch h·ªßy b·ªè khi n√≥ tr·ª±c ti·∫øp l√† Job cha m·∫π c·ªßa c√°c coroutine.</p>

<p>N·∫øu b·∫•t k·ª≥ child n√†o n√©m Exception, <code class="language-plaintext highlighter-rouge">SupervisorJob</code> s·∫Ω kh√¥ng lan truy·ªÅn Exception l√™n tr√™n trong hierarchy v√† s·∫Ω ƒë·ªÉ coroutine c·ªßa n√≥ x·ª≠ l√Ω. Trong tr∆∞·ªùng h·ª£p n√†y, <code class="language-plaintext highlighter-rouge">SupervisorJob</code> cho ph√©p c√°c Exception trong c√°c coroutine con ƒë∆∞·ª£c x·ª≠ l√Ω ri√™ng l·∫ª m√† kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn c√°c coroutine con kh√°c trong c√πng ph·∫°m vi.</p>

<h2 id="t√¨m-hi·ªÉu-s√¢u-h∆°n">T√¨m hi·ªÉu s√¢u h∆°n</h2>

<p>N·∫øu b·∫°n t√≤ m√≤ v·ªÅ c√°ch Job ho·∫°t ƒë·ªông, h√£y xem chi ti·∫øt c√°c h√†m <a href="https://github.com/Kotlin/kotlinx.coroutines/blob/master/kotlinx-coroutines-core/common/src/JobSupport.kt#L645">childCancelled</a> v√† <a href="https://github.com/Kotlin/kotlinx.coroutines/blob/master/kotlinx-coroutines-core/common/src/JobSupport.kt#L326">notifyCancelling</a> trong file JobSupport.kt. ƒê√¢y l√† c√°c h√†m c·ªët l√µi li√™n quan ƒë·∫øn vi·ªác h·ªßy b·ªè c√°c coroutine.</p>

<p>Trong SupervisorJob, ph∆∞∆°ng th·ª©c <a href="https://github.com/Kotlin/kotlinx.coroutines/blob/master/kotlinx-coroutines-core/common/src/Supervisor.kt#L64">childCancelled</a> lu√¥n tr·∫£ v·ªÅ false. ƒêi·ªÅu n√†y c√≥ nghƒ©a l√†:
<code class="language-plaintext highlighter-rouge">SupervisorJob</code> kh√¥ng truy·ªÅn h·ªßy b·ªè do l·ªói c·ªßa m·ªôt coroutine con l√™n c√°c coroutine con kh√°c trong c√πng ph·∫°m vi. Tuy nhi√™n, <code class="language-plaintext highlighter-rouge">SupervisorJob</code> c≈©ng kh√¥ng x·ª≠ l√Ω Exception n√©m ra b·ªüi c√°c coroutine con. Exception ƒë√≥ v·∫´n c·∫ßn ƒë∆∞·ª£c x·ª≠ l√Ω ri√™ng trong coroutine con g·∫∑p l·ªói.</p>

<h2 id="x·ª≠-l√Ω-v·ªõi-exception">X·ª≠ l√Ω v·ªõi Exception</h2>

<p>Coroutine s·ª≠ d·ª•ng c√∫ ph√°p b√¨nh th∆∞·ªùng c·ªßa Kotlin ƒë·ªÉ x·ª≠ l√Ω exception: <code class="language-plaintext highlighter-rouge">try/catch</code> ho·∫∑c l√† helper function d·ª±ng s·∫µn nh∆∞ runCatching (d√πng <code class="language-plaintext highlighter-rouge">try/catch</code> n·ªôi b·ªô)</p>

<p>Nh∆∞ ch√∫ng ta ƒë√£ n√≥i th√¨ exception kh√¥ng ƒë∆∞·ª£c catch s·∫Ω lu√¥n b·ªã b·∫Øn ra. Tuy nhi√™n c√°c coroutine builder kh√°c nhau x·ª≠ l√Ω exception theo nh·ªØng c√°ch kh√°c nhau.</p>

<h3 id="launch">Launch</h3>
<p>Khi s·ª≠ d·ª•ng h√†m launch, <strong>Exception s·∫Ω ƒë∆∞·ª£c n√©m ra ngay khi ch√∫ng x·∫£y ra</strong>. Do ƒë√≥, b·∫°n c√≥ th·ªÉ b·ªçc ƒëo·∫°n code c√≥ th·ªÉ n√©m Exception trong m·ªôt kh·ªëi <code class="language-plaintext highlighter-rouge">try/catch</code>, nh∆∞ trong v√≠ d·ª• n√†y:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="nf">codeThatCanThrowExceptions</span><span class="p">()</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="nc">Exception</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Handle exception</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p>V·ªõi <strong>launch</strong>, exception s·∫Ω ƒë∆∞·ª£c n√©m ra ngay khi ch√∫ng x·∫£y ra.</p>
</blockquote>

<h3 id="async">Async</h3>
<p>Khi s·ª≠ d·ª•ng <code class="language-plaintext highlighter-rouge">async</code> cho m·ªôt coroutine g·ªëc (coroutine con tr·ª±c ti·∫øp c·ªßa m·ªôt instance <code class="language-plaintext highlighter-rouge">CoroutineScope</code> ho·∫∑c <code class="language-plaintext highlighter-rouge">supervisorScope</code>), Exception s·∫Ω kh√¥ng t·ª± ƒë·ªông n√©m ra. Thay v√†o ƒë√≥, ch√∫ng s·∫Ω n√©m ra khi b·∫°n g·ªçi ph∆∞∆°ng th·ª©c <code class="language-plaintext highlighter-rouge">.await()</code>.</p>

<p>ƒê·ªÉ x·ª≠ l√Ω Exception n√©m ra trong <code class="language-plaintext highlighter-rouge">async</code> khi n√≥ l√† m·ªôt coroutine g·ªëc, b·∫°n c√≥ th·ªÉ b·ªçc vi·ªác g·ªçi <code class="language-plaintext highlighter-rouge">.await()</code> trong m·ªôt kh·ªëi <code class="language-plaintext highlighter-rouge">try/catch</code>:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">supervisorScope</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">deferred</span> <span class="p">=</span> <span class="nf">async</span> <span class="p">{</span>
        <span class="nf">codeThatCanThrowExceptions</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="k">try</span> <span class="p">{</span>
        <span class="n">deferred</span><span class="p">.</span><span class="nf">await</span><span class="p">()</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="nc">Exception</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Handle exception thrown in async</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Trong tr∆∞·ªùng h·ª£p n√†y, h√£y l∆∞u √Ω r·∫±ng vi·ªác g·ªçi <code class="language-plaintext highlighter-rouge">async</code> s·∫Ω kh√¥ng bao gi·ªù n√©m ra exception. Do ƒë√≥, b·∫°n kh√¥ng c·∫ßn ph·∫£i b·ªçc n√≥ trong kh·ªëi try/catch. Ph∆∞∆°ng th·ª©c <code class="language-plaintext highlighter-rouge">await</code> s·∫Ω n√©m ra exception x·∫£y ra b√™n trong coroutine <code class="language-plaintext highlighter-rouge">async</code>.</p>

<blockquote>
  <p>Khi s·ª≠ d·ª•ng <code class="language-plaintext highlighter-rouge">async</code> cho m·ªôt coroutine g·ªëc (coroutine con tr·ª±c ti·∫øp c·ªßa m·ªôt instance <code class="language-plaintext highlighter-rouge">CoroutineScope</code> ho·∫∑c <code class="language-plaintext highlighter-rouge">supervisorScope</code>), Exception s·∫Ω ƒë∆∞·ª£c n√©m ra khi b·∫°n g·ªçi ph∆∞∆°ng th·ª©c <code class="language-plaintext highlighter-rouge">.await()</code>.</p>
</blockquote>

<p>C·∫ßn l∆∞u √Ω r·∫±ng ch√∫ng ta ƒëang s·ª≠ d·ª•ng <code class="language-plaintext highlighter-rouge">supervisorScope</code> ƒë·ªÉ g·ªçi <code class="language-plaintext highlighter-rouge">async</code> v√† <code class="language-plaintext highlighter-rouge">await</code>. Nh∆∞ ƒë√£ n√≥i tr∆∞·ªõc ƒë√≥, <code class="language-plaintext highlighter-rouge">SupervisorJob</code> cho ph√©p coroutine t·ª± x·ª≠ l√Ω Exception, ng∆∞·ª£c l·∫°i v·ªõi Job s·∫Ω t·ª± ƒë·ªông lan truy·ªÅn Exception l√™n tr√™n hierarchy khi·∫øn kh·ªëi catch b√™n ngo√†i kh√¥ng ƒë∆∞·ª£c g·ªçi.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">coroutineScope</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">val</span> <span class="py">deferred</span> <span class="p">=</span> <span class="nf">async</span> <span class="p">{</span>
            <span class="nf">codeThatCanThrowExceptions</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="n">deferred</span><span class="p">.</span><span class="nf">await</span><span class="p">()</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="nc">Exception</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Exception thrown in async WILL NOT be caught here </span>
        <span class="c1">// but propagated up to the scope</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>H∆°n n·ªØa, Exception x·∫£y ra trong c√°c coroutine con ƒë∆∞·ª£c t·∫°o b·ªüi c√°c coroutine kh√°c s·∫Ω lu√¥n ƒë∆∞·ª£c lan truy·ªÅn b·∫•t k·ªÉ coroutine builder n√†o ƒë∆∞·ª£c s·ª≠ d·ª•ng. V√≠ d·ª•:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">scope</span> <span class="p">=</span> <span class="nc">CoroutineScope</span><span class="p">(</span><span class="nc">Job</span><span class="p">())</span>

<span class="n">scope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
    <span class="nf">async</span> <span class="p">{</span>
        <span class="c1">// If async throws, launch throws without calling .await()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Trong tr∆∞·ªùng h·ª£p n√†y, n·∫øu <code class="language-plaintext highlighter-rouge">async</code> n√©m Exception, n√≥ s·∫Ω ƒë∆∞·ª£c n√©m ra ngay l·∫≠p t·ª©c v√¨ coroutine con tr·ª±c ti·∫øp c·ªßa scope l√† <code class="language-plaintext highlighter-rouge">launch</code>. L√Ω do l√† <code class="language-plaintext highlighter-rouge">async</code> (s·ª≠ d·ª•ng <code class="language-plaintext highlighter-rouge">Job</code> trong <code class="language-plaintext highlighter-rouge">CoroutineContext</code>) s·∫Ω t·ª± ƒë·ªông lan truy·ªÅn Exception l√™n ƒë·∫øn coroutine cha (launch) v√† ch√≠nh launch s·∫Ω n√©m Exception ƒë√≥ ra.</p>

<blockquote>
  <p>‚ö†Ô∏è Exception n√©m ra trong builder <code class="language-plaintext highlighter-rouge">coroutineScope</code> ho·∫∑c trong c√°c coroutine con kh√°c s·∫Ω KH√îNG ƒë∆∞·ª£c b·∫Øt b·ªüi kh·ªëi try/catch ·ªü ƒë√¢y!</p>
</blockquote>

<p>Trong ph·∫ßn <code class="language-plaintext highlighter-rouge">SupervisorJob</code>, ch√∫ng ta ƒë√£ ƒë·ªÅ c·∫≠p ƒë·∫øn s·ª± t·ªìn t·∫°i c·ªßa <code class="language-plaintext highlighter-rouge">CoroutineExceptionHandler</code>. B√¢y gi·ªù h√£y c√πng t√¨m hi·ªÉu s√¢u h∆°n v·ªÅ n√≥!</p>

<h2 id="coroutineexceptionhandler">CoroutineExceptionHandler</h2>

<p><code class="language-plaintext highlighter-rouge">CoroutineExceptionHandler</code> l√† m·ªôt th√†nh ph·∫ßn t√πy ch·ªçn trong <code class="language-plaintext highlighter-rouge">CoroutineContext</code>, cho ph√©p b·∫°n x·ª≠ l√Ω c√°c <strong>exception kh√¥ng ƒë∆∞·ª£c b·∫Øt</strong>.</p>

<p>ƒê√¢y l√† c√°ch m√† b·∫°n c√≥ th·ªÉ ƒë·ªãnh nghƒ©a m·ªôt <code class="language-plaintext highlighter-rouge">CoroutineExceptionHandler</code> b·∫•t c·ª© khi n√†o m√† exception ƒë∆∞·ª£c b·∫Øt b·∫°n s·∫Ω c√≥ th√¥ng tin v·ªÅ <code class="language-plaintext highlighter-rouge">CoroutineContext</code> n∆°i m√† exception x·∫£y ra v√† exception ƒë√≥.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">handler</span> <span class="p">=</span> <span class="nc">CoroutineExceptionHandler</span> <span class="p">{</span>
    <span class="n">context</span><span class="p">,</span> <span class="n">exception</span> <span class="p">-&gt;</span> <span class="nf">println</span><span class="p">(</span><span class="s">"Caught $exception"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Exception s·∫Ω ƒë∆∞·ª£c b·∫Øt n·∫øu tho·∫£ m√£n c√°c y√™u c·∫ßu sau:</p>
<ul>
  <li><strong>Khi ‚è∞:</strong> Exception ƒë∆∞·ª£c n√©m ra b·ªüi m·ªôt coroutine t·ª± ƒë·ªông n√©m exception (ho·∫°t ƒë·ªông v·ªõi <code class="language-plaintext highlighter-rouge">launch</code>, kh√¥ng ho·∫°t ƒë·ªông v·ªõi <code class="language-plaintext highlighter-rouge">async</code>).</li>
  <li><strong>·ªû üåç:</strong> N·∫øu n√≥ n·∫±m trong <code class="language-plaintext highlighter-rouge">CoroutineContext</code> c·ªßa <code class="language-plaintext highlighter-rouge">CoroutineScope</code> ho·∫∑c m·ªôt coroutine g·ªëc (con tr·ª±c ti·∫øp c·ªßa <code class="language-plaintext highlighter-rouge">CoroutineScope</code> ho·∫∑c <code class="language-plaintext highlighter-rouge">supervisorScope</code>).</li>
</ul>

<p>H√£y xem m·ªôt s·ªë v√≠ d·ª• s·ª≠ d·ª•ng CoroutineExceptionHandler ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a ·ªü tr√™n. Trong v√≠ d·ª• sau, exception s·∫Ω ƒë∆∞·ª£c b·∫Øt b·ªüi tr√¨nh x·ª≠ l√Ω:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">scope</span> <span class="p">=</span> <span class="nc">CoroutineScope</span><span class="p">(</span><span class="nc">Job</span><span class="p">())</span>
<span class="n">scope</span><span class="p">.</span><span class="nf">launch</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">launch</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="nc">Exception</span><span class="p">(</span><span class="s">"Failed coroutine"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Trong tr∆∞·ªùng h·ª£p kh√°ch, tr√¨nh x·ª≠ l√Ω ƒë∆∞·ª£c c√†i ƒë·∫∑t trong m·ªôt coroutine b√™n trong, exception s·∫Ω kh√¥ng ƒë∆∞·ª£c b·∫Øt:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">scope</span> <span class="p">=</span> <span class="nc">CoroutineScope</span><span class="p">(</span><span class="nc">Job</span><span class="p">())</span>
<span class="n">scope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
    <span class="nf">launch</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="nc">Exception</span><span class="p">(</span><span class="s">"Failed coroutine"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Exception kh√¥ng ƒë∆∞·ª£c b·∫Øt v√¨ tr√¨nh x·ª≠ l√Ω kh√¥ng ƒë∆∞·ª£c c√†i ƒë·∫∑t trong CoroutineContext ph√π h·ª£p. Coroutine b√™n trong s·∫Ω truy·ªÅn exception l√™n coroutine cha ngay khi n√≥ x·∫£y ra, v√¨ coroutine cha kh√¥ng bi·∫øt g√¨ v·ªÅ tr√¨nh x·ª≠ l√Ω, n√™n exception s·∫Ω b·ªã n√©m ra.</p>

<hr />

<p>X·ª≠ l√Ω exception kh√©o l√©o trong ·ª©ng d·ª•ng c·ªßa b·∫°n r·∫•t quan tr·ªçng ƒë·ªÉ mang l·∫°i tr·∫£i nghi·ªám ng∆∞·ªùi d√πng t·ªët, ngay c·∫£ khi m·ªçi th·ª© kh√¥ng di·ªÖn ra nh∆∞ mong ƒë·ª£i.</p>

<p>H√£y nh·ªõ s·ª≠ d·ª•ng SupervisorJob khi b·∫°n mu·ªën tr√°nh truy·ªÅn lan h·ªßy b·ªè khi x·∫£y ra exception, v√† s·ª≠ d·ª•ng Job trong c√°c tr∆∞·ªùng h·ª£p kh√°c.</p>

<p>Exception m√† kh√¥ng ƒë∆∞·ª£c b·∫Øt s·∫Ω ƒë∆∞·ª£c lan truy·ªÅn, h√£y b·∫Øt ch√∫ng ƒë·ªÉ mang l·∫°i tr·∫£i nghi·ªám ng∆∞·ªùi d√πng tuy·ªát v·ªùi!</p>

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            
                <!-- <section class="subscribe-form">
                    <h3 class="subscribe-form-title">Subscribe to Kendis .dev</h3>
                    <p>Get the latest posts delivered right to your inbox</p>
                    <form method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  /><input class="location" type="hidden" name="location"  /><input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" type="email" name="email"  placeholder="youremail@example.com" />
    </div>
    <button class="" type="submit" disabled><span>Subscribe</span></button>
    <script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>
</form>

                </section> -->
            

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/android_blog/assets/images/ghost.png" alt="kendis" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/android_blog/author/kendis">Kendis</a></h4>
                                
                                    <p>M·ªôt th·∫±ng l·∫≠p tr√¨nh vi√™n Android</p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/android_blog/author/kendis">Read More</a>
                        </div>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/android_blog/assets/images/blog-cover.jpg)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; Kendis .dev &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/android_blog/tag/coroutine/">Coroutine</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/android_blog/better-way-to-collect-flow">C√°ch an to√†n ƒë·ªÉ thu th·∫≠p c√°c flow ·ªü Android UI</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/android_blog/coroutinescope-application-hilt">T·∫°o 1 ·ª©ng d·ª•ng CoroutineScope s·ª≠ d·ª•ng Hilt</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/android_blog/3-mistakes-should-avoid-compose">3 l·ªói c·∫ßn ph·∫£i tr√°nh khi s·ª≠ d·ª•ng Jetpack Compose</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/android_blog/tag/coroutine/">
                                
                                    Xem t·∫•t c·∫£ 5 post  ‚Üí
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/android_blog/hilt-stable">
                <div class="post-card-image" style="background-image: url(/android_blog/assets/images/hilt-stable.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/android_blog/hilt-stable">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Hilt</span>
                            
                        
                    

                    <h2 class="post-card-title">Hilt ƒë√£ stable. ƒê∆°n gi·∫£n ho√° vi·ªác dependency injection trong Android</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>Hilt, Gi·∫£i ph√°p Dependency Injection c·ªßa Jetpack cho Android app, gi·ªù ƒë√£ stable.

</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/android_blog/assets/images/ghost.png" alt="Kendis" />
                        
                        <span class="post-card-author">
                            <a href="/android_blog/author/kendis/">Kendis</a>
                        </span>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <span class="reading-time">
                    
                    
                      5 ph√∫t
                    
                </span>
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/android_blog/3-mistakes-should-avoid-compose">
                <div class="post-card-image" style="background-image: url(/android_blog/assets/images/viewmodelscope.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/android_blog/3-mistakes-should-avoid-compose">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Coroutine</span>
                            
                        
                    

                    <h2 class="post-card-title">3 l·ªói c·∫ßn ph·∫£i tr√°nh khi s·ª≠ d·ª•ng Jetpack Compose</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>D∆∞·ªõi ƒë√¢y s·∫Ω l√† m·ªôt s·ªë l·ªói c·∫ßn ph·∫£i tr√°nh khi s·ª≠ d·ª•ng Jetpack Compose.

</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/android_blog/assets/images/ghost.png" alt="Kendis" />
                        
                        <span class="post-card-author">
                            <a href="/android_blog/author/kendis/">Kendis</a>
                        </span>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <span class="reading-time">
                    
                    
                      4 ph√∫t
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="/android_blog/">
            
                <img src="/android_blog/assets/images/favicon.png" alt="Kendis .dev icon" />
            
            <span>Kendis .dev</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Exception trong coroutine</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Chia s·∫ª <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Exception+trong+coroutine&amp;url=https://kendis1002.github.io/android_blog/coroutines-cancellation-exceptions"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://kendis1002.github.io/android_blog/coroutines-cancellation-exceptions"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="/android_blog/">Kendis .dev</a> &copy; 2025</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyllt/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/android_blog/">Latest Posts</a>
                    <a href="https://facebook.com/kendis1002" target="_blank" rel="noopener">Facebook</a>
                    
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
        <div id="subscribe" class="subscribe-overlay">
            <a class="subscribe-overlay-close" href="#"></a>
            <div class="subscribe-overlay-content">
                
                <h1 class="subscribe-overlay-title">Subscribe to Kendis .dev</h1>
                <p class="subscribe-overlay-description">Stay up to date! Get all the latest &amp; greatest posts delivered straight to your inbox</p>
                <!-- <form method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  /><input class="location" type="hidden" name="location"  /><input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" type="email" name="email"  placeholder="youremail@example.com" />
    </div>
    <button class="" type="submit" disabled><span>Subscribe</span></button>
    <script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>
</form>
 -->
            </div>
        </div>
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/android_blog/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/android_blog/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69281367-1', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
